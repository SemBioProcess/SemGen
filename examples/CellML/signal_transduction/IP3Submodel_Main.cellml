<?xml version="1.0" encoding="iso-8859-1"?>
<model
    name="IP3Submodel"
    cmeta:id="IP3Submodel"
    xmlns="http://www.cellml.org/cellml/1.1#"
    xmlns:cellml="http://www.cellml.org/cellml/1.1#"
    xmlns:cmeta="http://www.cellml.org/metadata/1.0#"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:bqs="http://www.cellml.org/bqs/1.0#" 
    xmlns:dcterms="http://purl.org/dc/terms/"
    xmlns:vCard="http://www.w3.org/2001/vcard-rdf/3.0#"
>
    
     <rdf:RDF>
            <rdf:Description rdf:about="">
              <!--
                The Model Builder Metadata.  The Dublin Core "creator" element is used  
                to indicate the person who translated the model into CellML.
                The rdf:about of the Description has to remain blank for PMR2 to pick this up properly....
              -->
              <dc:creator rdf:parseType="Resource">
                <vCard:N rdf:parseType="Resource">
                  <vCard:Family>Cooling</vCard:Family>
                  <vCard:Given>Mike</vCard:Given>
                </vCard:N>
                <vCard:EMAIL rdf:parseType="Resource">
                  <rdf:value>m.cooling@auckland.ac.nz</rdf:value>
                  <rdf:type rdf:resource="http://imc.org/vCard/3.0#internet" />
                </vCard:EMAIL>
                <vCard:ORG rdf:parseType="Resource">
                  <vCard:Orgname>The University of Auckland</vCard:Orgname>
                  <vCard:Orgunit>Auckland Bioengineering Institute</vCard:Orgunit>
                </vCard:ORG>
              </dc:creator>
        </rdf:Description>
        
            <rdf:Description rdf:about="#IP3Submodel">
                <bqs:reference rdf:parseType="Resource">
                    <bqs:JournalArticle rdf:parseType="Resource">
                        <dc:creator>
                            <rdf:Seq>
                            <rdf:li rdf:parseType="Resource">
                                <vCard:N rdf:parseType="Resource">
                                <vCard:Family>Cooling</vCard:Family>
                                <vCard:Given>Mike</vCard:Given>
                                </vCard:N>
                                <vCard:EMAIL rdf:parseType="Resource">
                                <rdf:value>m.cooling@auckland.ac.nz</rdf:value>
                                <rdf:type rdf:resource="http://imc.org/vCard/3.0#internet"/>
                                </vCard:EMAIL>
                                <vCard:ORG rdf:parseType="Resource">
                                <vCard:Orgname>Auckland Bioengineering Institute</vCard:Orgname>
                                <vCard:Orgunit>University of Auckland</vCard:Orgunit>
                                </vCard:ORG>
                            </rdf:li>
    			<rdf:li rdf:parseType="Resource">
    			    <vCard:N rdf:parseType="Resource">
    			    <vCard:Family>Hunter</vCard:Family>
    			    <vCard:Given>Peter</vCard:Given>
    			    </vCard:N>
    			    <vCard:EMAIL rdf:parseType="Resource">
    			    <rdf:value>p.hunter@auckland.ac.nz</rdf:value>
    			    <rdf:type rdf:resource="http://imc.org/vCard/3.0#internet"/>
    			    </vCard:EMAIL>
    			    <vCard:ORG rdf:parseType="Resource">
    			    <vCard:Orgname>Auckland Bioengineering Institute</vCard:Orgname>
    			    <vCard:Orgunit>University of Auckland</vCard:Orgunit>
    			    </vCard:ORG>
                            </rdf:li>
    			<rdf:li rdf:parseType="Resource">
    			    <vCard:N rdf:parseType="Resource">
    			    <vCard:Family>Crampin</vCard:Family>
    			    <vCard:Given>Edmund</vCard:Given>
    			    </vCard:N>
    			    <vCard:EMAIL rdf:parseType="Resource">
    			    <rdf:value>e.crampin@auckland.ac.nz</rdf:value>
    			    <rdf:type rdf:resource="http://imc.org/vCard/3.0#internet"/>
    			    </vCard:EMAIL>
    			    <vCard:ORG rdf:parseType="Resource">
    			    <vCard:Orgname>Auckland Bioengineering Institute</vCard:Orgname>
    			    <vCard:Orgunit>University of Auckland</vCard:Orgunit>
    			    </vCard:ORG>
                            </rdf:li>
                            </rdf:Seq>
                        </dc:creator>
                        <dc:title>Modeling Biological Modularity with CellML</dc:title>
                        <bqs:volume>2</bqs:volume>
                        <bqs:first_page>73</bqs:first_page>
                        <bqs:last_page>79</bqs:last_page>
                        <bqs:Journal rdf:parseType="Resource">
                                <dc:title>IET Systems Biology</dc:title>
                        </bqs:Journal>
                        <dcterms:issued rdf:parseType="Resource">
                                <dcterms:W3CDTF>2008-00-00 00:00</dcterms:W3CDTF>
                        </dcterms:issued>
                    </bqs:JournalArticle>
                </bqs:reference>
    
                <bqs:reference rdf:parseType="Resource">
                        <dc:subject rdf:parseType="Resource">
                                <bqs:subject_type>keyword</bqs:subject_type>
                                <rdf:value>
                                        <rdf:Bag>
                                                <rdf:li>Signal Transduction</rdf:li>
                                                <rdf:li>Modularity</rdf:li>
                                        </rdf:Bag>
                                </rdf:value>
                        </dc:subject>
                </bqs:reference>
            </rdf:Description>
    </rdf:RDF>

<import xlink:href="extracellular_ligand.cellml">
    <component name="ligand" component_ref="ligand" />
</import>
<import xlink:href="GPCR_Cycle.cellml">
    <component name="GPCR_Cycle" component_ref="GPCR_Cycle" />
</import>
<import xlink:href="Galpha.cellml">
    <component name="Galpha" component_ref="Galpha" />
</import>
<import xlink:href="calcium.cellml">
    <component name="calcium" component_ref="calcium" />
</import>
<import xlink:href="PLC_Cycle.cellml">
    <component name="PLC_Cycle" component_ref="PLC_Cycle" />
</import>
<import xlink:href="PIP2.cellml">
    <component name="PIP2" component_ref="PIP2" />
</import>
<import xlink:href="IP3.cellml">
    <component name="IP3" component_ref="IP3" />
</import>

<import xlink:href="IP3_degradation.cellml">
    <component name="IP3_degradation" component_ref="IP3_degradation" />
</import>

<rdf:RDF
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:cmeta="http://www.cellml.org/metadata/1.0#"
    xmlns:bqs="http://www.cellml.org/bqs/1.0#"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:dcterms="http://purl.org/dc/terms/"
    xmlns:vCard="http://www.w3.org/2001/vcard-rdf/3.0#">
    <rdf:Description rdf:about="#IP3Submodel">
        <dc:creator rdf:parseType="Resource">
            <vCard:N rdf:parseType="Resource">
                <vCard:Family>Cooling</vCard:Family>
                <vCard:Given>Michael</vCard:Given>
            </vCard:N>
            <vCard:EMAIL rdf:parseType="Resource">
                <rdf:value>m.cooling@auckland.ac.nz</rdf:value>
                <rdf:type rdf:resource="http://imc.org/vCard/3.0#internet" />
            </vCard:EMAIL>
        </dc:creator>

        <dc:title>Cooling's IP3 Pathway Submodel</dc:title>
    </rdf:Description>
</rdf:RDF>
<!--
*******************************************************
***         U   N   I   T   S                       ***
*******************************************************
-->
<units name="s">
    <unit units="second" />
</units>

<units name="um2">
    <unit units="um" exponent="2" />
</units>

<units name="um">
    <unit prefix="micro" units="meter" />
</units>

<units name="per_um">
    <unit units="um" exponent="-1" />
</units>

<units name="uM_um2">
    <unit units="um2"/>
    <unit units="uM"/>
</units>

<units name="uM">
    <unit prefix="micro" units="mole" />
    <unit units="liter" exponent="-1" />
</units>

<units name="per_um2">
    <unit units="um2" exponent="-1" />
</units>

<units name="um3">
    <unit units="um" exponent="3" />
</units>

<units name="per_um2">
    <unit units="um2" exponent="-1" />
</units>

<units name="per_um2_per_s">
    <unit units="um2" exponent="-1" />
    <unit units="s" exponent="-1" />
</units>

<units name="uM_per_s">
    <unit units="uM" exponent="1"/>
    <unit units="s" exponent="-1" />
</units>

<units name="per_uM_per_um3">
    <unit units="uM" exponent="-1" />
    <unit units="um3" exponent="-1" />
</units>


<!--
*******************************************************
***     C   O   M   P   O   N   E   N   T   S       ***
*******************************************************
-->
<component name="environment">
    <variable name="t"  private_interface="out" units="s" />     
</component>

<component name="geometry">
    <variable name="Cpc" units="uM_um2" private_interface="out" />
    <variable name="Cc" units="uM" />
    <variable name="Cp" units="per_um2" />
    <variable name="Vc" initial_value="2550" units="um3" />
    <variable name="Rpc" initial_value="4.61" units="per_um"/>

    <math xmlns="http://www.w3.org/1998/Math/MathML"
        cmeta:id="Cc_eq">
        <apply id="Cc_eq">
            <eq/> />
            <ci>Cc</ci>
            <apply>
                <divide />
                <cn cellml:units="dimensionless">1</cn>
                <apply>
                    <times />
                    <ci>Vc</ci>
                    <cn cellml:units="per_uM_per_um3">6.022e2</cn>
                </apply>
            </apply>
        </apply>
    </math>

    <math xmlns="http://www.w3.org/1998/Math/MathML"
        cmeta:id="Cp_eq">
        <apply id="Cp_eq">
            <eq/> />
            <ci>Cp</ci>
            <apply>
                <divide />
                <cn cellml:units="dimensionless">1</cn>
                <apply>
                    <times />
                    <ci>Vc</ci>
                    <ci>Rpc</ci>
                </apply>
            </apply>
        </apply>
    </math>

    <math xmlns="http://www.w3.org/1998/Math/MathML"
        cmeta:id="Cpc_eq">
        <apply id="Cpc_eq">
            <eq/> />
            <ci>Cpc</ci>
            <apply>
                <divide />
                <ci>Cc</ci>
                <ci>Cp</ci>
            </apply>
        </apply>
    </math>
</component>

<component name="Galpha_interface">
    <variable name="gpcrJ2" units="per_um2_per_s" public_interface="in"/>
    <variable name="gpcrJ3" units="per_um2_per_s" public_interface="in"/>
    <variable name="plcJ5" units="per_um2_per_s" public_interface="in"/>
    <variable name="plcJ6" units="per_um2_per_s" public_interface="in"/>
    <variable name="J_gain_Gd" units="per_um2_per_s" public_interface="out"/>

    <variable name="gpcrJ6" units="per_um2_per_s" public_interface="in"/>
    <variable name="plcJ2" units="per_um2_per_s" public_interface="in"/>
    <variable name="plcJ3" units="per_um2_per_s" public_interface="in" />
    <variable name="J_gain_Gt" units="per_um2_per_s" public_interface="out"/>

    <math xmlns="http://www.w3.org/1998/Math/MathML"
        cmeta:id="J_gain_Gd_eq">
        <apply id="J_gain_Gd_eq">
            <eq/> 
            <ci>J_gain_Gd</ci>
            <apply>
                <minus />
                <apply>
                    <plus />
                    <ci>plcJ5</ci>
                    <ci>plcJ6</ci>
                </apply>
                <apply>
                    <plus />
                    <ci>gpcrJ2</ci>
                    <ci>gpcrJ3</ci>
                </apply>
            </apply>
        </apply>
    </math>

    <math xmlns="http://www.w3.org/1998/Math/MathML"
        cmeta:id="J_gain_Gt_eq">
        <apply id="J_gain_Gt_eq">
            <eq/> 
            <ci>J_gain_Gt</ci>
            <apply>
                <minus />
                 <ci>gpcrJ6</ci>
                <apply>
                    <plus />
                    <ci>plcJ2</ci>
                    <ci>plcJ3</ci>
                </apply>
            </apply>
        </apply>
    </math>
</component>

<component name="calcium_interface">
    <variable name="J_gain_Ca" units="uM_per_s" public_interface="out" />
    <variable name="Cpc" units="uM_um2" private_interface="in" />
    <variable name="plcJ1" units="per_um2_per_s" public_interface="in"/>
    <variable name="plcJ4" units="per_um2_per_s" public_interface="in" />

    <math xmlns="http://www.w3.org/1998/Math/MathML"
        cmeta:id="J_gain_Ca_eq">
        <apply id="J_gain_Ca_eq">
            <eq/> 
            <ci>J_gain_Ca</ci>
            <apply>
                <times />
                <ci>Cpc</ci>
                <apply>
                    <times />
                    <cn cellml:units="dimensionless">-1</cn>
                    <apply>
                        <plus />
                        <ci>plcJ1</ci>
                        <ci>plcJ4</ci>
                    </apply>
                </apply>
            </apply>
        </apply>
    </math>  
</component>

<component name="IP3_interface" >
    <variable name="Cpc" units="uM_um2" private_interface="in" />
    <variable name="J_gain_IP3" units="uM_per_s" public_interface="out" />
    <variable name="pip2J1" units="per_um2_per_s" public_interface="in"/>
    <variable name="pip2J2" units="per_um2_per_s" public_interface="in"/>
    <variable name="IP3degJ" units = "uM_per_s" public_interface="in"/>

    <math xmlns="http://www.w3.org/1998/Math/MathML"
        cmeta:id="J_gain_IP3">
        <apply id="J_gain_IP3">
            <eq/> 
            <ci>J_gain_IP3</ci> 
            <apply>
                <minus />
                <apply>
                    <times />
                    <ci>Cpc</ci>
                    <apply>
                        <plus />
                        <ci>pip2J1</ci>
                        <ci>pip2J2</ci>
                    </apply>
                </apply>
                <ci>IP3degJ</ci>
            </apply>
        </apply>
    </math>
</component>

<group>
    <relationship_ref relationship="encapsulation" />
        <component_ref component="environment">
            <component_ref component="geometry">
                <component_ref component="ligand"/>
                <component_ref component="GPCR_Cycle"/>
                <component_ref component="Galpha_interface"/>
                <component_ref component="Galpha"/>
                <component_ref component="PLC_Cycle"/>
                <component_ref component="calcium"/>
                <component_ref component="calcium_interface"/>
                <component_ref component="PIP2"/>
                <component_ref component="IP3"/>
                <component_ref component="IP3_interface" />
            </component_ref>
        </component_ref>
</group>

<connection>
    <map_components
        component_1="environment" component_2="ligand" />
    <map_variables variable_1="t" variable_2="t" />
</connection>

<connection>
    <map_components
        component_1="environment" component_2="GPCR_Cycle" />
    <map_variables variable_1="t" variable_2="t" />
</connection>

<connection>
    <map_components
        component_1="environment" component_2="Galpha" />
    <map_variables variable_1="t" variable_2="t" />
</connection>

<connection>
    <map_components
        component_1="environment" component_2="PLC_Cycle" />
    <map_variables variable_1="t" variable_2="t" />
</connection>

<connection>
    <map_components
        component_1="environment" component_2="calcium" />
    <map_variables variable_1="t" variable_2="t" />
</connection>    

<connection>
    <map_components
        component_1="geometry" component_2="calcium_interface" />
    <map_variables variable_1="Cpc" variable_2="Cpc" />
</connection>

<connection>
    <map_components
        component_1="geometry" component_2="PIP2" />
    <map_variables variable_1="Cpc" variable_2="Cpc" />
</connection>

<connection>
    <map_components
        component_1="geometry" component_2="IP3_interface" />
    <map_variables variable_1="Cpc" variable_2="Cpc" />
</connection> 

<connection>
    <map_components
        component_1="environment" component_2="IP3" />
    <map_variables variable_1="t" variable_2="t" />
</connection>

<connection>
    <map_components
        component_1="ligand" component_2="GPCR_Cycle" />
    <map_variables variable_1="L" variable_2="L" />
</connection>

<connection>
    <map_components
        component_1="GPCR_Cycle" component_2="Galpha_interface" />
    <map_variables variable_1="J2" variable_2="gpcrJ2" />
    <map_variables variable_1="J3" variable_2="gpcrJ3" />
    <map_variables variable_1="J6" variable_2="gpcrJ6" />
</connection>

<connection>
    <map_components
        component_1="PLC_Cycle" component_2="Galpha_interface" />
    <map_variables variable_1="J2" variable_2="plcJ2" />
    <map_variables variable_1="J3" variable_2="plcJ3" />
    <map_variables variable_1="J5" variable_2="plcJ5" />
    <map_variables variable_1="J6" variable_2="plcJ6" />
</connection>

<connection>
    <map_components
        component_1="Galpha" component_2="Galpha_interface" />
    <map_variables variable_1="J_gain_Gd" variable_2="J_gain_Gd" />
    <map_variables variable_1="J_gain_Gt" variable_2="J_gain_Gt" />
</connection>

<connection>
    <map_components
        component_1="Galpha" component_2="PLC_Cycle" />
    <map_variables variable_1="Gt" variable_2="Gt" />
</connection>

<connection>
    <map_components
        component_1="Galpha" component_2="GPCR_Cycle" />
    <map_variables variable_1="Gd" variable_2="Gd" />
</connection>

<connection>
    <map_components
        component_1="PLC_Cycle" component_2="calcium_interface" />
    <map_variables variable_1="J1" variable_2="plcJ1" />
    <map_variables variable_1="J4" variable_2="plcJ4" />
</connection>

<connection>
    <map_components
        component_1="calcium" component_2="calcium_interface" />
    <map_variables variable_1="J_gain_Ca" variable_2="J_gain_Ca" />
</connection>

<connection>
    <map_components
        component_1="PLC_Cycle" component_2="calcium" />
    <map_variables variable_1="Ca" variable_2="Ca" />
</connection>

<connection>
    <map_components
        component_1="PLC_Cycle" component_2="PIP2" />
    <map_variables variable_1="Pc" variable_2="Eb" />
    <map_variables variable_1="Pcg" variable_2="Es" />
</connection>

<connection>
    <map_components
        component_1="IP3_interface" component_2="PIP2" />
    <map_variables variable_1="pip2J1" variable_2="J1" />
    <map_variables variable_1="pip2J2" variable_2="J2" />
</connection>

<connection>
    <map_components
        component_1="IP3_interface" component_2="IP3" />
    <map_variables variable_1="J_gain_IP3" variable_2="J_gain_IP3" />
</connection>

<connection>
    <map_components
        component_1="IP3_interface" component_2="IP3_degradation" />
    <map_variables variable_1="IP3degJ" variable_2="J1" />
</connection>

<connection>
    <map_components
        component_1="IP3" component_2="IP3_degradation" />
    <map_variables variable_1="IP3" variable_2="IP3" />
</connection>

</model>