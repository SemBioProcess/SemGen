<!DOCTYPE html>
	<head>
		<meta charset="utf-8">

		<script src="js/lib/jquery-2.1.1.min.js"></script>
		<script src="js/lib/d3.js"></script>
		<script src="js/lib/bootstrap.min.js"></script>
		<script src="js/definitions.js"></script>
		<script src="js/classExtensions.js"></script>

		<script src="js/keyElement.js"></script>
		<script src="js/doodads/StageDoodad.js"></script>
		<script src="js/nodes/hiddenLabelNode.js"></script>
		<script src="js/nodes/node.js"></script>
		<script src="js/nodes/dependencyNode.js"></script>
		<script src="js/nodes/parentNode.js"></script>
		<script src="js/nodes/modelNode.js"></script>
		<script src="js/nodes/submodelNode.js"></script>
		<script src="js/nodes/physiomapNode.js"></script>
		<script src="js/nodes/behaviors/nodeDrag.js"></script>
		<script src="js/nodes/behaviors/dragCustomOverlap.js"></script>
		<script src="js/nodes/behaviors/parentNodeDrag.js"></script>
		<script src="js/nodes/behaviors/dragToMerge.js"></script>
		<script src="js/nodes/behaviors/hull.js"></script>
		<script src="js/nodes/behaviors/hiddenLabelNodeGenerator.js"></script>
		<script src="js/nodes/ghostNode.js"></script>

		<script src="js/links/link.js"></script>

		<script src="js/taskTray.js"></script>
		<script src="js/project/leftSidebar.js"></script>
		<script src="js/project/rightSidebar.js"></script>
		<script src="js/graph.js"></script>
		<script src="js/taskprototype.js"></script>
		<script src="js/nodes/behaviors/parentNodeDrag.js"></script>
		
		<script src="js/nodes/extractedModel.js"></script>
		<script src="js/merger/mergePreview.js"></script>
		<script src="js/merger/conflictResolPane.js"></script>
		<script src="js/merger/semanticResolPane.js"></script>
		<script src="js/merger/mergerTask.js"></script>
		<script src="js/project/stage.js"></script>
		<script src="js/project/contextMenu.js"></script>
		<script src="js/nodes/behaviors/boundingBox.js"></script>
		<script src="js/main.js"></script>


		<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />
		<link type="text/css" rel="stylesheet" href="css/stage.css" />
		<link type="text/css" rel="stylesheet" href="css/graph.css" />
		<link type="text/css" rel="stylesheet" href="css/leftSidebar.css" />
		<link type="text/css" rel="stylesheet" href="css/rightSidebar.css" />
		<link type="text/css" rel="stylesheet" href="css/merger.css" />

	</head>
	<body>
	    <div id="doodads"> </div>

		<!--<div id="addModelButton" class="btn-default" data-toggle="tooltip" data-placement="bottom" title="Add model">-->
			<!--<span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span>-->
		<!--</div>-->
		<!---->
		<!--<div id="saveButton" class = "btn-default" datacontextmenuol
		-floppy-disk" aria-hidden="true"></span>-->
		<!--</div>-->
		
	<div class="btn-group" role="group" id="stagemodes">
		<button id="toggleSelectButton" class="btn btn-toggle" data-toggle="tooltip" data-placement="bottom" data-container="body" title="Toggle Selection">
			<span class="glyphicon glyphicon-hand-up" aria-hidden="true"></span>
		</button>
		<button id="toggleMoveStageButton" class="btn btn-toggle" data-toggle="tooltip" data-placement="bottom" data-container="body" title="Toggle Navigation">
			<span class="glyphicon glyphicon-move" aria-hidden="true"></span>
		</button>
	</div>
		
		<div id="contextmenu">
			<nav class="context-menu">
			  <ul class="context-menu_items">
			  </ul>
			</nav>
		</div>
		
		<div class="stageSearch">
			<div class="searchIcon">
				<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 300 300">
					<title>search icon</title>
					<defs>
					<linearGradient id="linearGradient12975">
						<stop stop-color="#ffffff" id="stop12977" offset="0"></stop>
						<stop stop-color="#d2d5d8" id="stop12979" offset="1"></stop>
					</linearGradient>
					<linearGradient y2="1.236288" x2="0.162791" y1="0.166667" x1="0.5" id="linearGradient12981" xlink:href="#linearGradient12975"/>
					</defs>
					<metadata id="metadata12220">image/svg+xmlSergio Luiz Araujo Silvasearchiconsinformaticcomputer</metadata>
					<g>
						<title>Layer 1</title>
						<path fill="#454040" stroke-width="9.756173" id="path12423" d="m35.938999,35.085999c-43.272999,43.272003 -43.379,114.158997 -0.105988,157.432007c36.662991,36.663025 93.201992,42.25 135.920986,16.765991l76.343994,74.234985c10.506989,10.197998 27.084991,9.821045 37.116974,-0.843994c10.03302,-10.664978 9.77002,-27.445984 -0.737976,-37.643982l-75.182983,-72.864014c26.360992,-42.846985 21.007996,-100.044983 -16.028015,-137.080994c-43.27298,-43.273008 -114.054993,-43.273008 -157.327,0l0,0l0.000008,0zm31.738979,31.739014c26.10202,-26.102024 67.746033,-26.102024 93.848022,0c26.10199,26.10199 26.10199,67.745972 0,93.847961c-26.10199,26.102051 -67.746002,26.102051 -93.848022,0c-26.10199,-26.10199 -26.10199,-67.745972 0,-93.847961z"></path>
					</g>
				</svg>
			</div>
			<div class="loader"></div>
			<div class="searchValueContainer">
				<div class="search-dropdown">
					<button class="searchFilterBtn button dropdown-toggle" type="button">
						<span class="toggle-active">Filters</span>
						<span class="caret"></span>
					</button>
					<ul class="searchDropDownMenu dropdown-menu">
						<li><label><input id="checkAll" type="checkbox" value="all" checked>All</label></li>
						<li><label><input id="checkModel" type="checkbox" value="models" checked>Example models</label></li>
						<li><label><input id="checkBioModels" type="checkbox" value="biomodels">BioModels Database</label></li>
						<li><label><input id="checkNodeName" type="checkbox" value="nodeNames" checked>Node names</label></li>
						<li><label><input id="checkNodeDesc" type="checkbox" value="nodeDescription" checked>Node descriptions</label></li>
					</ul>
				</div>
				<input name="searchString" class="searchString" type="text" placeholder="Search for models or nodes">
				<ul class="searchResults"></ul>
			</div>
		</div>
	



		<!-- Sidebars -->
		<!-- Left Sidebar -->
		<button id="leftSidebarButton" class="sidebarButton" type="button" data-toggle="toggle" data-target="#leftSidebar" >
			«
		</button>

		<div id="leftSidebar" class="panel panel-default sidebar in" >
		</div>

		<!-- Right Sidebar -->

		<button id="rightSidebarButton" class="sidebarButton" type="button" data-toggle="toggle" data-target="#rightSidebar">
			«
		</button>

		<div id="rightSidebar" class="panel panel-default sidebar">
			<div id="rightmenu" class="panel-default">
				<div class="panel-heading">
					Visualization Options
				</div>
				<div id="stagemenu" class="panel-default subpanel">
					<div id="stagekey" class="vertical-menu">
						<span class="heading">Visualization Key</span>
						<ul id="modelkey" class="visibleKeys"> 
						</ul>
						<span class="subheading">Submodel / Dependencies</span>
						<div id="subdepkeys"> 
							<ul class="keys"></ul>
						</div>
						<span class="subheading">PhysioMap</span>
						<div id="physkeys">
							<ul class="keys"></ul>
						</div>
					</div>
					<div id="d3opts">
						<span class="subheading">Graph Settings</span>
						<ul>
							<li>Fix Nodes: <input type="checkbox" id="fixedNodes"></li>
							<li>Center Graph: <input type="checkbox" id="gravity" value=""></li>
							<li>Repulsion: <input type="number" id="repulsion" value="100" step="10"></li>
							<li>Friction: <input type="number" id="friction" value="0.7" max="1.0" min="0.1" step="0.1"></li>
							<li id="linklengthli">Link length: <input type="number" id="linklength" value="100"></li>
							<li id="chargedistli">Charge distance: <input type="number" id="chargedist" value="300"></li>
							<li id="advancedVizParamsli"><a href="#" id="advancedVizParams">More parameters</a></li>
						</ul>
					</div>
				</div>
					<div id="nodemenu" class="panel-default subpanel">
						<div class="panel-heading">Node Info</div>
						<div class="panel-body">
							<div class="nodemenuRow" id="nodemenuNameRow">
								<span class="nodeInfoLabel">Name: </span>
								<span class="nodeInfoContent" id="nodemenuName"></span>
							</div>
							<div class="nodemenuRow" id="nodemenuTypeRow">
								<span class="nodeInfoLabel">Type: </span>
								<span class="nodeInfoContent" id="nodemenuType"></span>
							</div>
							<div class="nodemenuRow" id="nodemenuIDRow">
								<span class="nodeInfoLabel">Meta ID: </span>
								<span class="nodeInfoContent" id="nodemenuMetaID"></span>
							</div>
							<div class="nodemenuRow" id="nodemenuFreeTextRow">
								<span class="nodeInfoLabel">Description: </span>
								<span class="nodeInfoContent" id="nodemenuFreeText"></span>
							</div>
							<div class="nodemenuRow" id="nodemenuAnnotationRow">
								<span class="nodeInfoLabel">Annotation: </span>
								<span class="nodeInfoContent" id="nodemenuAnnotation"></span>
							</div>
							<div class="nodemenuRow" id="nodemenuUnitRow">
								<span class="nodeInfoLabel">Unit: </span>
								<span class="nodeInfoContent" id="nodemenuUnit"></span>
							</div>
							<div class="nodemenuRow" id="nodemenuEquationRow">
								<span class="nodeInfoLabel">Equation: </span>
								<span class="nodeInfoContent" id="nodemenuEquation"></span>
							</div>
							<div class="nodemenuRow" id="nodemenuParticipantsRow">
								<span class="nodeInfoLabel">Participants: </span>
								<span class="nodeInfoContent" id="nodemenuParticipants"><pre></pre></span>
							</div>
							<div class="nodemenuRow" id="nodemenuRefTermURIRow">
								<span class="nodeInfoLabel">URI: </span>
								<span class="nodeInfoContent" id="nodemenuRefTermURI"></span>
							</div>
						</div>
					</div>
			</div>
		</div>

		<!-- Active Task Tray -->
		<div id="activeTaskTray"><span id="activeTaskText">Active Tasks</span></div>
		<span id="activeTaskPanel"></span>

		<div id="stage"></div>

		<!--Task modal dialog-->
		<div id="taskModal" class="modal fade" data-keyboard="false" data-backdrop="static">
			<div class="modal-dialog modal-lg">
				<div class="modal-content" id="modalContent"></div>
			</div>
		</div>

		<!-- Templates -->
		<template id="mergerContent">
			<div class="modal-header">
				<div class="mergeResHeader">
					<h6 class="leftModelName"></h6>
					<h4 class="modal-title">Resolve overlaps</h4>
					<h6 class="rightModelName"></h6>
				</div>
			</div>
			<div id="mergeStep1">
				<div class="mergePreview">
					<div class="substage" id="modelAStage">
						<div class="substageMenu">
							<input type="checkbox" id="fixedNodesA"> Fix Nodes
						</div>
					</div>
					<div class="substage" id="modelBStage">
						<div class="substageMenu">
							<input type="checkbox" id="fixedNodesB"> Fix Nodes
						</div>
					</div>
				</div>
				<div id="resizeHandle"></div>
				<div class="modal-body">
					<div class="panel-group" id="overlapPanels">
					</div>
					<div class="panel panel-default manualMapping">
						<div class="panel-heading">Select codewords for manual mapping</div>
						<div class = "manualMapModel" id="manualMapLeftModel"></div>
						<div class = "manualMapModel" id="manualMapRightModel"></div>
						<div class="panel-footer centerBtnWrapper">
							<button type="button" class="btn btn-warning addManualMap">Add manual mapping</button>
						</div>
					</div>
				</div>

				<div class="modal-footer">
					<button id="returnBtn" type="button" class="returnBtn btn btn-primary">Return to Project</button>
					<button id="nextBtn" type="button" class="btn btn-success">Resolve Merge Conflicts</button>
					<button id="mergeBtn" type="button" class="merge btn btn-success">Merge</button>
					<button type="button" class="btn btn-default hideResolutionsBtn">Visualize</button>
				</div>
			</div>

			<!--Duplicate name and unit conflicts resolution step -->
			<div id="mergeStep2">
				<div class="panel-group">
					<div class="panel panel-default" id="DupSubModels">
						<div class="panel-heading mergeStep2Heading">Duplicate submodel names - Please enter new names:</div>
					</div>
					<div class="panel panel-default" id="DupCodewords">
						<div class="panel-heading mergeStep2Heading">Duplicate codeword names - Please enter new names:</div>
					</div>
					<div class="panel panel-default" id="UnitConf">
						<div class="panel-heading mergeStep2Heading">Unit conflicts - Please enter unit conversions:</div>
					</div>
				</div>

				<div class="modal-footer">
					<button id="returnBtn2" type="button" class="returnBtn btn btn-primary">Return to Project</button>
					<button id="backBtn" type="button" class="btn btn-warning">Back</button>
					<button id="mergeBtn2" type="button" class="merge btn btn-success">Merge</button>
					<button type="button" class="btn btn-default hideResolutionsBtn">Visualize</button>
				</div>
			</div>

		</template>


		<template id="overlapPanel">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h4 class="panel-title">
						<a class="collapsePane mergeResCollapsePane" data-toggle="collapse">
							<div class="overlapPane">
								<div class="mappingType"></div>
								<div class="radio leftRes"></div>
								<div class="radio rightRes"></div>
								<div class="radio ignoreRes"></div>
							</div>
						</a>
					</h4>
				</div>
				<div class="panel-collapse collapse mergeResCollapse">
					<div class="panel-body">
						<div class="leftCollapsePanel">
							<div class="collapsePanelLabel">Name</div>
							<div class="varName"></div>
							<div class="collapsePanelLabel">Annotation</div>
							<div class="annotation"></div>
							<div class="collapsePanelLabel">Equation</div>
							<div class="equation"></div>
							<div class="collapsePanelLabel">Unit</div>
							<div class="unit"></div>
						</div>
						<div class="overlapButtons">
							<button type="button" class="btn btn-info btn-sm previewResolutionBtn">Preview</button>
							<button type="button" style="display: none" class="btn btn-info btn-sm removeMappingBtn">Remove</button>
						</div>
						<div class="rightCollapsePanel">
							<div class="collapsePanelLabel">Name</div>
							<div class="varName"></div>
							<div class="collapsePanelLabel">Annotation</div>
							<div class="annotation"></div>
							<div class="collapsePanelLabel">Equation</div>
							<div class="equation"></div>
							<div class="collapsePanelLabel">Unit</div>
							<div class="unit"></div>
						</div>
					</div>
				</div>
			</div>
		</template>

		<template id="dupNameResolution">
			<div class="panel-body mergeStep2Body">
				<div class="dupname"></div>:
				<input class="newName" type="text" size="31" placeholder="No special character, no space.">
			</div>
		</template>

		<template id="unitConversionResolution">
			<div class="panel-body mergeStep2Body">
				<span class="unitA"></span> = <span class="unitB"></span>
				<select class="multiplyChoice">
					<option value="multiply">*</option>
					<option value="divide">/</option>
				</select>
				<input class="unitConvFactor" type="number" placeholder="1000">
			</div>
		</template>

		<template id="leftProjectMenus">
			<div id="leftmenu" class="panel-default">
				<div class="panel-heading">
					Project Actions
				</div>
				<div id="projmenu" class="panel-collapse subpanel">
					<ul class='menulist'>
						<li><button type="button" class="panelbutton" id="addModel" >Open model</button></li>
					</ul>
					<!--<span class="subheading">Project Models</span>-->
					<!--<div id = 'projmodeldiv'> -->
						<!--<ul id='projectmodels'>-->
							<!---->
						<!--</ul>-->
					<!--</div>-->
					
				</div>
				<div class="panel-heading" id="rightSidebarModelName">
				</div>
				<div id="modelmenu" class="panel-default subpanel">
					<div id="modelinfo">
						No model selected
					</div>
				</div>
			</div>
		</template>

		<template id="leftMergerMenus">
			<div id="leftmenu" class="panel-default">
				<div class="panel subpanel">
					<span class='subheading'>Merger Actions</span>
					<ul class='menulist'>
						<li><button id="resolPanels" type="button" class="panelbutton">Resolve Overlaps</button></li>
						<li><button id="stageModel" class="panelbutton" type="button">Add Model to Project</button></li>
						<li><button id="minimize" type="button" class="panelbutton">Return to Project</button></li>
						<li><button id="quitMergerBtn" type="button" class="panelbutton">Close Merge</button></li>
					</ul>
				</div>
				<div class="panel subpanel" id="modeloptions">
						<span class='subheading'>Visualize</span> 
						<ul class='menulist'> 
							<li><button type='button' class='panelbutton' onclick='main.task.doModelAction(function(model) { model.createVisualization(DisplayModes.SHOWSUBMODELS, true);});'>
								Submodels</button></li>
							<li><button type='button' class='panelbutton' onclick='main.task.doModelAction(function(model) { model.createVisualization(DisplayModes.SHOWDEPENDENCIES, true);});'>
								Dependencies</button></li>
						</ul>
				</div>
				
			</div>
		</template> 

	<div id="dialog-confirm">
	  <p><span class="ui-icon ui-icon-alert" style="float:left; margin:12px 12px 20px 0;"></span></p>
	</div>
	
	</body>
</html>
